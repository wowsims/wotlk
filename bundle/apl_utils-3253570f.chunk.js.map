{"version":3,"file":"apl_utils-3253570f.chunk.js","sources":["../../../ui/core/proto_utils/apl_utils.ts"],"sourcesContent":["import {\n    ActionID as ActionIdProto,\n    Cooldowns,\n} from '../proto/common.js';\n\nimport {\n\tAPLAction,\n\tAPLPrepullAction,\n} from '../proto/apl.js';\n\nexport function prepullPotionAction(doAt?: string): APLPrepullAction {\n\treturn APLPrepullAction.fromJsonString(`{\"action\":{\"castSpell\":{\"spellId\":{\"otherId\":\"OtherActionPotion\"}}},\"doAtValue\":{\"const\":{\"val\":\"${doAt || '-1s'}\"}}}`);\n}\n\nexport function autocastCooldownsAction(startAt?: string): APLAction {\n    if (startAt) {\n      \treturn APLAction.fromJsonString(`{\"condition\":{\"cmp\":{\"op\":\"OpGt\",\"lhs\":{\"currentTime\":{}},\"rhs\":{\"const\":{\"val\":\"${startAt}\"}}}},\"autocastOtherCooldowns\":{}}`);\n    } else {\n      \treturn APLAction.fromJsonString(`{\"autocastOtherCooldowns\":{}}`);\n    }\n}\n\nexport function scheduledCooldownAction(schedule: string, actionId: ActionIdProto): APLAction {\n    return APLAction.fromJsonString(`{\"schedule\":{\"schedule\":\"${schedule}\",\"innerAction\":{\"castSpell\":{\"spellId\":${ActionIdProto.toJsonString(actionId)}}}}}`);\n}\n\nexport function simpleCooldownActions(cooldowns: Cooldowns): Array<APLAction> {\n    return cooldowns.cooldowns\n    .filter(cd => cd.id)\n    .map(cd => {\n        const schedule = cd.timings.map(timing => timing.toFixed(1) + 's').join(', ');\n        return scheduledCooldownAction(schedule, cd.id!);\n    });\n}\n\nexport function standardCooldownDefaults(cooldowns: Cooldowns, prepotAt?: string, startAutocastCDsAt?: string): [Array<APLPrepullAction>, Array<APLAction>] {\n    return [\n        [prepullPotionAction(prepotAt)],\n        [\n            autocastCooldownsAction(startAutocastCDsAt),\n            simpleCooldownActions(cooldowns),\n        ].flat(),\n    ];\n}\n"],"names":["simpleCooldownActions","cooldowns","filter","cd","id","map","schedule","actionId","APLAction","fromJsonString","ActionIdProto","toJsonString","scheduledCooldownAction","timings","timing","toFixed","join","standardCooldownDefaults","prepotAt","startAutocastCDsAt","doAt","APLPrepullAction","startAt","flat"],"mappings":"0EA0BO,SAASA,EAAsBC,GAC3B,OAAAA,EAAUA,UAChBC,QAAOC,GAAMA,EAAGC,KAChBC,KAAUF,GAPC,SAAwBG,EAAkBC,GACtD,OAAOC,EAAUC,eAAe,4BAA4BH,4CAAmDI,EAAcC,aAAaJ,SAC9I,CAOeK,CADUT,EAAGU,QAAQR,KAAcS,GAAAA,EAAOC,QAAQ,GAAK,MAAKC,KAAK,MAC/Bb,EAAGC,KAEpD,CAEgB,SAAAa,EAAyBhB,EAAsBiB,EAAmBC,GACvE,MAAA,CACH,EA3B4BC,EA2BPF,EA1BrBG,EAAiBZ,eAAe,oGAAoGW,GAAQ,eA2B5I,EAxBgCE,EAyBJH,EAxB5BG,EACMd,EAAUC,eAAe,oFAAoFa,uCAE7Gd,EAAUC,eAAe,kCAsB3BT,EAAsBC,IACxBsB,QA3BH,IAAiCD,EAJJF,CAiCpC"}